# Story 2.2 회귀 테스트 전략

## 테스트 전략 요지

- 기존 기능 위에 기능을 얹는 과제라 회귀 테스트로 안정성 보장
- 새 기능은 단위 테스트로 빠르게 검증
- 기존 데이터만으로는 충분치 않아 런타임 정규화(마이그레이션)로 테스트/실환경 일치
- 이 조합으로 리팩터링 안정성 + 새 기능 신뢰성 확보

## 회귀 범위

1) 생성/수정/삭제 흐름 유지
- 단일 일정 생성/수정/삭제 정상
- 반복 일정 생성/수정/삭제 정상(일/주/월/년)
- 알림 설정/검색/달력 뷰(주/월) 표시 정상

2) 반복 로직 정확성 유지
- interval 1–99 범위 보장
- 종료일 전/후 경계 처리 정상
- 최대 10회 제한 유지(종료일 미지정 시)

3) 데이터 정규화(마이그레이션) 영향
- repeat.interval 1–99로 클램프
- 반복 이벤트에 한해 repeat.version 부여
- 기존 데이터와의 호환성 유지

## 리스크와 완화
- UI 변경으로 인한 경고/런타임 에러 → 통합 테스트로 탐지
- 데이터 스키마 확장으로 인한 파손 → 정규화로 흡수, 통합 테스트로 검증

## 수행 항목
- 유닛: `repeatingEventUtils`(계산/검증) + 새 기능 `excludeDates`
- 통합: `medium.integration.spec.tsx` CRUD/뷰/검색/충돌 전범위
- 훅: `useEventForm` 반복 생성 플로우 유지

## 성공 기준
- 전체 테스트 그린
- 기존 통합 시나리오 모두 통과
- 새 유닛 테스트 통과

## 실행 명령
- pnpm test --run
