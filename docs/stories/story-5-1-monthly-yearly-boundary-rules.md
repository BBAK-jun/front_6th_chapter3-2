# Story 5.1: 월/연 반복 경계 규칙 준수

## Story Goal

월 31일/윤년 2월 29일 등 경계 날짜에서 반복 생성 규칙을 정확히 준수하여 잘못된 날짜 생성(말일 보정 등)을 방지합니다.

## User Story

**As a** 사용자,
**I want** 월간/연간 반복 시 시작일과 동일한 일자만 유효할 때에만 생성되고,
**so that** 비존재 날짜(2/30, 4/31 등)에는 인스턴스가 생성되지 않도록 하고 싶다.

## Acceptance Criteria

1. **월 반복(31일 시작)**: 시작일이 31일이면 31일이 존재하는 달에만 생성한다. 31일이 없는 달은 건너뛴다.
2. **연 반복(2/29 시작)**: 시작일이 2/29이면 윤년의 2/29에만 생성한다. 비윤년에는 생성되지 않는다.
3. 기존 주/일 반복 동작은 변경하지 않는다.
4. 기존 UI 표시(반복 아이콘)는 유지한다.

## Technical Notes

- 대상 파일: `src/utils/repeatingEventUtils.ts`
- 함수: `calculateRepeatingDates(repeatInfo, startDate)`
- 월/연 계산 시 다음 회차 계산 후 결과의 day가 시작일 day와 다르면 해당 회차를 건너뛴다.
- 2/29 시작 + 비윤년의 경우 해당 연도 회차를 건너뛴다.

## Definition of Done

- [ ] 월 31일 시작 시 31일이 없는 달이 생성되지 않음을 단위 테스트로 검증
- [ ] 연 2/29 시작 시 비윤년 회차가 생성되지 않음을 단위 테스트로 검증
- [ ] 기존 기능(주/일 반복, 아이콘 표시) 회귀 이상 없음
- [ ] 문서 반영(본 문서) 완료

## Testing Requirements

- 단위 테스트 추가: `src/__tests__/utils/repeatingEventUtils.spec.ts`
  - 월 31일 시작 케이스
  - 연 2/29 시작 케이스
- 통합 테스트 영향 없음(로직만 보정)

## Risks / Notes

- 타임존 영향으로 day 비교 시 로컬/UTC 변환 주의
- 기존 월말 보정 로직이 있었다면 제거/무시되어야 함(정확 일자 매칭만 허용)
